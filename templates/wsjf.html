{% extends "base.html" %}
{% block content %}

<h2 style="color:#86BC25;margin-top:0;">WSJF Prioritization</h2>

<!-- ========================= -->
<!-- FEATURE CARDS -->
<!-- ========================= -->
{% for f in features %}
<div class="card" style="position:relative; margin-bottom:30px;">

  <!-- WSJF SCORE -->
  <div style="position:absolute; right:20px; top:20px; text-align:right;">
    <div style="font-size:11px;color:#94a3b8;">Cost of Delay</div>
    <div style="font-size:28px;font-weight:800;color:#86BC25;">
      {{ f["Cost of Delay"] if f["Cost of Delay"] == f["Cost of Delay"] else "—" }}
    </div>

    <div style="font-size:11px;color:#94a3b8;margin-top:10px;">WSJF</div>
    <div style="font-size:28px;font-weight:800;color:#86BC25;">
      {{ f["WSJF"] if f["WSJF"] == f["WSJF"] else "—" }}
    </div>
  </div>

  <!-- FEATURE META -->
  <div style="color:#86BC25;font-weight:800;font-size:12px;">
    {{ f["Feature ID"] }}
  </div>

  <h3 style="margin-top:6px;">{{ f["Feature Name"] }}</h3>

  <p style="color:#cbd5f5; max-width:75%;">
    {{ f["Feature Description"] }}
  </p>

  <pre style="color:#94a3b8; white-space:pre-wrap; max-width:75%;">
{{ f["Feature Acceptance Criteria"] }}
  </pre>

  <!-- WSJF INPUTS -->
  <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:20px;">
    <div class="card">
      <div style="font-size:11px;color:#94a3b8;">Business Value</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Business Value"] or "—" }}
      </div>
    </div>

    <div class="card">
      <div style="font-size:11px;color:#94a3b8;">Time Criticality</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Time Criticality"] or "—" }}
      </div>
    </div>

    <div class="card">
      <div style="font-size:11px;color:#94a3b8;">RR / OE</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["OE / RR Value"] or "—" }}
      </div>
    </div>

    <div class="card">
      <div style="font-size:11px;color:#94a3b8;">Job Size</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Job Size"] or "—" }}
      </div>
    </div>
  </div>

</div>
{% endfor %}

<!-- ========================= -->
<!-- WHAT THIS MEANS -->
<!-- ========================= -->
<div class="card" style="margin-top:40px;">
  <h4 style="color:#86BC25;margin-top:0;">What this means</h4>
  <p style="color:#94a3b8;">
    Features are ranked using SAFe WSJF. Items with higher WSJF deliver economic value sooner
    and should be prioritized earlier during PI Planning.
  </p>
</div>

<!-- ========================= -->
<!-- EXPORT -->
<!-- ========================= -->
<a href="/export/wsjf"
   class="nav-link"
   style="display:inline-block;margin-top:20px;">
  Export WSJF Excel
</a>

{% endblock %}
