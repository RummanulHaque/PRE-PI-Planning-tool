{% extends "base.html" %}
{% block content %}

<h2 style="color:#86BC25;margin-top:0;">WSJF Prioritization</h2>

{% for f in features %}
<div class="card" style="position:relative; margin-bottom:30px; padding:22px; border:1px solid #1e293b; border-radius:16px; background:#0f172a; box-shadow:0 18px 35px rgba(0,0,0,0.25);">

  <!-- WSJF SCORE -->
  <div style="position:absolute; right:20px; top:20px; text-align:right;">
    <div style="font-size:11px;color:#94a3b8;">Cost of Delay</div>
    <div style="font-size:28px;font-weight:800;color:#86BC25;">
      {{ f["Cost of Delay"] if (f["Cost of Delay"] == f["Cost of Delay"] and f["Cost of Delay"] != 0) else "â€”" }}
    </div>

    <div style="font-size:11px;color:#94a3b8;margin-top:10px;">WSJF</div>
    <div style="font-size:28px;font-weight:800;color:#86BC25;">
      {{ f["WSJF"] if (f["WSJF"] == f["WSJF"] and f["WSJF"] != 0) else "â€”" }}
    </div>
  </div>

  <!-- FEATURE META -->
  <div style="color:#86BC25;font-weight:800;font-size:12px;">
    {{ f["Feature ID"] }}
  </div>

  <h3 style="margin:6px 0 10px 0;">{{ f["Feature Name"] }}</h3>

  <p style="color:#cbd5f5; max-width:75%; margin:0 0 12px 0;">
    {{ f["Feature Description"] }}
  </p>

  <pre style="color:#94a3b8; white-space:pre-wrap; max-width:75%; margin:0;">
{{ f["Feature Acceptance Criteria"] }}
  </pre>

  <!-- WSJF INPUTS -->
  <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-top:18px;">

    <div class="card" style="padding:16px; border:1px solid #1e293b; border-radius:14px; background:#0b1220;">
      <div style="font-size:11px;color:#94a3b8;">Business Value</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Business Value"] if (f["Business Value"] == f["Business Value"] and f["Business Value"] != 0) else "â€”" }}
      </div>
    </div>

    <div class="card" style="padding:16px; border:1px solid #1e293b; border-radius:14px; background:#0b1220;">
      <div style="font-size:11px;color:#94a3b8;">Time Complexity</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Time Complexity"] if (f["Time Complexity"] == f["Time Complexity"] and f["Time Complexity"] != 0) else "â€”" }}
      </div>
    </div>

    <div class="card" style="padding:16px; border:1px solid #1e293b; border-radius:14px; background:#0b1220;">
      <div style="font-size:11px;color:#94a3b8;">OE / RR Value</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["OE/RR Value"] if (f["OE/RR Value"] == f["OE/RR Value"] and f["OE/RR Value"] != 0) else "â€”" }}
      </div>
    </div>

    <div class="card" style="padding:16px; border:1px solid #1e293b; border-radius:14px; background:#0b1220;">
      <div style="font-size:11px;color:#94a3b8;">Job Size</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Job Size"] if (f["Job Size"] == f["Job Size"] and f["Job Size"] != 0) else "â€”" }}
      </div>
    </div>

    <div class="card" style="padding:16px; border:1px solid #1e293b; border-radius:14px; background:#0b1220;">
      <div style="font-size:11px;color:#94a3b8;">Story Points</div>
      <div style="font-size:20px;font-weight:700;">
        {{ f["Story Points"] if (f["Story Points"] == f["Story Points"] and f["Story Points"] != 0) else "â€”" }}
      </div>
    </div>

  </div>

  <!-- Planning Poker CTA -->
  <div style="margin-top:14px;">
    <a href="/start_poker/{{ f['Feature ID'] }}"
       style="display:inline-block;
              padding:10px 14px;
              border:1px solid #86BC25;
              border-radius:12px;
              color:#0b1220;
              background:#86BC25;
              font-weight:700;
              text-decoration:none;">
      ðŸŽ¯ Planning Poker for this Feature
    </a>
  </div>

</div>
{% endfor %}

<!-- WHAT THIS MEANS -->
<div class="card" style="margin-top:40px; padding:22px; border:1px solid #1e293b; border-radius:16px; background:#0f172a;">
  <h4 style="color:#86BC25;margin-top:0;">What this means</h4>
  <p style="color:#94a3b8; margin:0;">
    Features are ranked using SAFe WSJF. Items with higher WSJF deliver economic value sooner
    and should be prioritized earlier during PI Planning.
  </p>
</div>

<!-- EXPORT -->
<a href="/export/wsjf"
   class="nav-link"
   style="display:inline-block;margin-top:20px; padding:10px 14px; border:1px solid #1e293b; border-radius:12px; color:#cbd5f5; text-decoration:none;">
  Export WSJF Excel
</a>

{% endblock %}
